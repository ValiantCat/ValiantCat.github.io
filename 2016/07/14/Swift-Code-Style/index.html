<!DOCTYPE html>
<!--[if lte IE 8 ]>
<html class="ie" xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-US" lang="en-US">
<![endif]-->
<!--[if (gte IE 9)|!(IE)]><!-->
<!--
***************  *      *     *
      8          *    *       *
      8          *  *         *
      8          **           *
      8          *  *         *
      8          *    *       *
      8          *      *     *
      8          *        *   ***********    -----Theme By Kieran(http://go.kieran.top)
-->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-US" lang="en-US">
<!--<![endif]-->

<head>
  <title>Swift-Code-Style | 茶茶的小屋</title>
  <!-- Meta data -->
    <meta http-equiv="Content-Type" content="text/html" charset="UTF-8" >
    <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="generator" content="茶茶的小屋">
    <meta name="author" content="寒哥">
    <meta name="description" content="iOS 开发， Swift，Objective-C,OC" />
    <meta name="keywords" content="" />

    <!-- Favicon, (keep icon in root folder) -->
    <link rel="Shortcut Icon" href="/img/favicon.ico" type="image/ico">

    <link rel="alternate" href="/atom.xml" title="茶茶的小屋" type="application/atom+xml">
    <link rel="stylesheet" href="/css/all.css" media="screen" type="text/css">
	
    <link rel="stylesheet" href="/highlightjs/github.css" type="text/css">
    


    <!-- Custom stylesheet, (add custom styles here, always load last) -->
    <!-- Load our stylesheet for IE8 -->
    <!--[if IE 8]>
    <link rel="stylesheet" type="text/css" href="/css/ie8.css" />
    <![endif]-->

    <!-- Google Webfonts (Monserrat 400/700, Open Sans 400/600) -->
    <!-- <link href='//fonts.useso.com/css?family=Montserrat:400,700' rel='stylesheet' type='text/css'> -->
    <!-- <link href='//fonts.useso.com/css?family=Open+Sans:400,600' rel='stylesheet' type='text/css'> -->

    <!-- Load our fonts individually if IE8+, to avoid faux bold & italic rendering -->
    <!--[if IE]>
    <link href='http://fonts.useso.com/css?family=Montserrat:400' rel='stylesheet' type='text/css'>
    <link href='http://fonts.useso.com/css?family=Montserrat:700' rel='stylesheet' type='text/css'>
    <link href='http://fonts.useso.com/css?family=Open+Sans:400' rel='stylesheet' type='text/css'>
    <link href='http://fonts.useso.com/css?family=Open+Sans:600' rel='stylesheet' type='text/css'>
    <![endif]-->

    <!-- jQuery | Load our jQuery, with an alternative source fallback to a local version if request is unavailable -->
    <script src="/js/jquery-1.11.1.min.js"></script>
    <script>window.jQuery || document.write('<script src="js/jquery-1.11.1.min.js"><\/script>')</script>

    <!-- Load these in the <head> for quicker IE8+ load times -->
    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
    <script src="/js/html5shiv.min.js"></script>
    <script src="/js/respond.min.js"></script>
    <![endif]-->










  
  
  <link rel="alternate" type="application/atom+xml" title="Atom 0.3" href="atom.xml">
  
  

  
  <style>.col-md-8.col-md-offset-2.opening-statement img{display:none;}</style>
</head>

<!--
<body class="post-template">
-->
<body id="index" class="lightnav animsition">

      <!-- ============================ Off-canvas navigation =========================== -->

    <div class="sb-slidebar sb-right sb-style-overlay sb-momentum-scrolling">
        <div class="sb-close" aria-label="Close Menu" aria-hidden="true">
            <img src="/img/close.png" alt="Close"/>
        </div>
        <!-- Lists in Slidebars -->
        <ul class="sb-menu">
            <li><a href="/" class="animsition-link" title="Home">Home</a></li>
            <li><a href="/archives" class="animsition-link" title="archive">archives</a></li>
            <!-- Dropdown Menu -->
			 
            
            
            <li>
                <a class="sb-toggle-submenu">Links<span class="sb-caret"></span></a>
                <ul class="sb-submenu">
                    
                    <li><a href="http://www.jianshu.com/users/cc1e4faec5f7" class="animsition-link">寒哥的简书</a></li>
                    
                    <li><a href="http://blog.csdn.net/xinxinqiu" class="animsition-link">寒哥的CSDN</a></li>
                    
                    <li><a href="https://github.com/aiqiuqiu" class="animsition-link">寒哥的Github</a></li>
                    
                </ul>
            </li>
            
        </ul>
        <!-- Lists in Slidebars -->
        <ul class="sb-menu secondary">
            <li><a href="/about.html" class="animsition-link" title="about">About</a></li>
            <li><a href="/atom.xml" class="animsition-link" title="rss">RSS</a></li>
        </ul>
    </div>
    
    <!-- ============================ END Off-canvas navigation =========================== -->

    <!-- ============================ #sb-site Main Page Wrapper =========================== -->

    <div id="sb-site">
        <!-- #sb-site - All page content should be contained within this id, except the off-canvas navigation itself -->

        <!-- ============================ Header & Logo bar =========================== -->

        <div id="navigation" class="navbar navbar-fixed-top">
            <div class="navbar-inner">
                <div class="container">
                    <!-- Nav logo -->
                    <div class="logo">
                        <a href="/" title="Logo" class="animsition-link">
                         <img src="/img/logo.png" alt="Logo" width="35px;"/> 
                        </a>
                    </div>
                    <!-- // Nav logo -->
                    <!-- Info-bar -->
                    <nav>
                        <ul class="nav">
                            <li><a href="/" class="animsition-link">茶茶的小屋</a></li>
                            <li class="nolink"><span>Always </span>Creative.</li>
                            
                            <li><a href="https://github.com/aiqiuqiu" title="Github" target="_blank"><i class="icon-github"></i></a></li>
                            
                            
                            <li><a href="https://twitter.com/" title="Twitter" target="_blank"><i class="icon-twitter"></i></a></li>
                            
                            
                            <li><a href="https://www.facebook.com/" title="Facebook" target="_blank"><i class="icon-facebook"></i></a></li>
                            
                            
                            <li><a href="https://google.com/" title="Google-Plus" target="_blank"><i class="icon-google-plus"></i></a></li>
                            
                            
                            <li><a href="http://weibo.com/" title="Sina-Weibo" target="_blank"><i class="icon-sina-weibo"></i></a></li>
                            
                            <li class="nolink"><span>Welcome!</span></li>
                        </ul>
                    </nav>
                    <!--// Info-bar -->
                </div>
                <!-- // .container -->
                <div class="learnmore sb-toggle-right">More</div>
                <button type="button" class="navbar-toggle menu-icon sb-toggle-right" title="More">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar before"></span>
                <span class="icon-bar main"></span>
                <span class="icon-bar after"></span>
                </button>
            </div>
            <!-- // .navbar-inner -->
        </div>

        <!-- ============================ Header & Logo bar =========================== -->

        <!-- ============================ Hero Image =========================== -->

        <section id="hero" class="scrollme">
            <div class="container-fluid element-img" style="background: url(/img/bg_img.jpg) no-repeat center center fixed;background-size: cover">
                <div class="row">
                    <div class="col-xs-12 col-sm-8 col-sm-offset-2 col-md-8 col-md-offset-2 vertical-align cover boost text-center">
                        <div class="center-me animateme" data-when="exit" data-from="0" data-to="0.6" data-opacity="0" data-translatey="100">
                            <div>
                            	
                                <h2>YOU'VE MADE A <span>BRAVE</span> DECISION, WELCOME.</h2>
                                <p></p>
				    			
                                <h2></h2>
                                <p>每一个不曾起舞的日子都是对生命的辜负。</p>
				    			

                            </div>
                        </div>
                    </div>
                    <!-- // .col-md-12 -->
                </div>
                <div class="herofade beige-dk"></div>
            </div>
        </section>

        <!-- Height spacing helper -->
        <div class="heightblock"></div>
        <!-- // End height spacing helper -->

        <!-- ============================ END Hero Image =========================== -->
      
<section id="intro">
    <div class="container">
        <div class="row col-md-offset-2">
            <div class="col-md-8">
    			<span class="post-meta">
      <time datetime="2016-07-14T03:29:12.000Z" itemprop="datePublished">
          2016-07-14
      </time>
    
    
    | 
    <a href='/tags/Swift/'>Swift</a>
    
    
</span>
                <h1>Swift-Code-Style</h1>
            </div>
        </div>
        <div class="col-md-8 col-md-offset-2">
      		<blockquote>
<p>最近工作也比较稳定了，公司在做代码规范和组件化的跳转。 鉴于使用Objective-C的开发成员比较多， 我们架构师就整理了Objective-C的代码规范。不过作为Swift开发的老司机，也整理了一套适用与Swift的代码规范。 以后可以直接拿来用了。</p>
</blockquote>
<!-- toc -->
<ul>
<li><a href="#注释">注释</a><ul>
<li><a href="#文档注释">文档注释</a></li>
<li><a href="#方法注释">方法注释</a></li>
</ul>
</li>
<li><a href="#命名">命名</a><ul>
<li><a href="#protocols-协议命名">Protocols 协议命名</a></li>
<li><a href="#emumerations-枚举命名规范">Emumerations 枚举命名规范</a></li>
<li><a href="#class-prefixes类型前缀">Class Prefixes类型前缀</a></li>
<li><a href="#selector选择器">Selector选择器</a></li>
<li><a href="#generics泛型">Generics泛型</a></li>
</ul>
</li>
<li><a href="#code-formatting-代码格式">Code Formatting 代码格式</a><ul>
<li><a href="#留空白">留空白</a></li>
<li><a href="#声明类型时将冒号与标识符连在一起">声明类型时，将冒号与标识符连在一起</a></li>
<li><a href="#control-flow-控制流">Control Flow 控制流</a></li>
<li><a href="#代码块缩进">代码块缩进</a></li>
<li><a href="#early-return">Early Return</a></li>
<li><a href="#semicolons-分号">Semicolons 分号</a></li>
<li><a href="#自定义运算符的时候左右尽量各保留一个空格">自定义运算符的时候左右尽量各保留一个空格</a></li>
</ul>
</li>
<li><a href="#代码分割">代码分割</a><ul>
<li><a href="#protocolconformance-协议保持一致性">ProtocolConformance 协议保持一致性</a></li>
<li><a href="#无用的代码要删除">无用的代码要删除</a></li>
</ul>
</li>
<li><a href="#类型定义">类型定义</a><ul>
<li><a href="#更多的使用let而不是var">更多的使用let，而不是var</a></li>
<li><a href="#常量">常量</a></li>
<li><a href="#optional可选类型">Optional可选类型</a><ul>
<li><a href="#尽量不要使用强制解包">尽量不要使用强制解包</a></li>
<li><a href="#避免使用隐式可选类型">避免使用隐式可选类型</a></li>
</ul>
</li>
<li><a href="#struct-initializers-结构体初始化">Struct Initializers 结构体初始化</a></li>
<li><a href="#lazy-initialization">Lazy Initialization</a></li>
</ul>
</li>
<li><a href="#classes-and-structures-结构体和类">Classes and Structures 结构体和类</a><ul>
<li><a href="#首选struct而非class">首选struct而非class</a></li>
<li><a href="#只有在必须时才使用self">只有在必须时才使用self</a></li>
<li><a href="#对于只读的属性或者下标语法使用隐式的getter方法">对于只读的属性或者下标语法，使用隐式的getter方法</a></li>
<li><a href="#请把class默认标记为final">请把class默认标记为final</a></li>
<li><a href="#类型推断">类型推断</a></li>
<li><a href="#函数声明">函数声明</a></li>
<li><a href="#闭包表达式">闭包表达式</a></li>
</ul>
</li>
<li><a href="#syntactic-sugar语法糖">Syntactic Sugar语法糖</a></li>
<li><a href="#内存管理">内存管理</a></li>
<li><a href="#对于顶级类型函数变量定义明确的列出权限控制">对于顶级类型，函数，变量定义，明确的列出权限控制</a></li>
</ul>
<!-- tocstop -->
<h1 id="注释"><a href="#注释" class="headerlink" title="注释"></a>注释</h1><blockquote>
<p>// 单行注释 / <em>多行注释</em> /</p>
<p>/// 标记注释1</p>
<p>/<em>* 标记注释2</em> /</p>
</blockquote>
<p>建议使用<a href="https://github.com/onevcat/VVDocumenter-Xcode" target="_blank" rel="external">VVDocument-Xode插件</a></p>
<h2 id="文档注释"><a href="#文档注释" class="headerlink" title="文档注释"></a>文档注释</h2><p>以/<em>* ….</em>/ 标记， 不用再没一行开头都加*号 支持markdown书写 例如</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/**</span></div><div class="line"> ## Feature Support</div><div class="line"></div><div class="line"> This class does some awesome things. It supports:</div><div class="line"></div><div class="line"> - Feature 1</div><div class="line"> - Feature 2</div><div class="line"> - Feature 3</div><div class="line"></div><div class="line"> ## Examples</div><div class="line"></div><div class="line"> Here is an example use case indented by four spaces because that indicates a</div><div class="line"> code block:</div><div class="line"></div><div class="line">     let myAwesomeThing = MyAwesomeClass()</div><div class="line">     myAwesomeThing.makeMoney()</div><div class="line"></div><div class="line"> ## Warnings</div><div class="line"></div><div class="line"> There are some things you should be careful of:</div><div class="line"></div><div class="line"> 1\. Thing one</div><div class="line"> 2\. Thing two</div><div class="line"> 3\. Thing three</div><div class="line"> */</div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyAwesomeClass</span> </span>&#123;</div><div class="line">    <span class="comment">/* ... */</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="方法注释"><a href="#方法注释" class="headerlink" title="方法注释"></a>方法注释</h2><p>用 - parameter注释来标记参数等</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/**</span></div><div class="line"> This does something with a `UIViewController`, perchance.</div><div class="line"> - warning: Make sure that `someValue` is `true` before running this function.</div><div class="line"> */</div><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">myFunction</span><span class="params">()</span></span> &#123;</div><div class="line">    <span class="comment">/* ... */</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h1 id="命名"><a href="#命名" class="headerlink" title="命名"></a>命名</h1><p>使用可读的驼峰命名法去给<code>类</code> <code>方法</code> <code>变量</code> 命名。 <code>class</code> <code>struct</code> <code>protocol</code> <code>enum</code> 应使用大写，变量名使用小写</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">private</span> <span class="keyword">let</span> maximumWidgetCount = <span class="number">100</span></div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">WidgetContainer</span> </span>&#123;</div><div class="line">  <span class="keyword">var</span> widgetButton: <span class="type">UIButton</span></div><div class="line">  <span class="keyword">let</span> widgetHeightPercentage = <span class="number">0.85</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>对于全局函数，init方法 ，建议每个参数都使用外部变量，来保证可读性</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">dateFromString</span><span class="params">(dateString: String)</span></span> -&gt; <span class="type">NSDate</span></div><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">convertPointAt</span><span class="params">(column column: Int, row: Int)</span></span> -&gt; <span class="type">CGPoint</span></div><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">timedAction</span><span class="params">(afterDelay delay: NSTimeInterval, perform action: SKAction)</span></span> -&gt; <span class="type">SKAction</span>!</div><div class="line"></div><div class="line"><span class="comment">// would be called like this:</span></div><div class="line">dateFromString(<span class="string">"2014-03-14"</span>)</div><div class="line">convertPointAt(column: <span class="number">42</span>, row: <span class="number">13</span>)</div><div class="line">timedAction(afterDelay: <span class="number">1.0</span>, perform: someOtherAction)</div></pre></td></tr></table></figure>
<h2 id="protocols-协议命名"><a href="#Protocols-协议命名" class="headerlink" title="Protocols 协议命名"></a>Protocols 协议命名</h2><p>建议遵守<a href="https://swift.org/documentation/api-design-guidelines/#follow-case-conventions" target="_blank" rel="external">Apple’s API DesignGuidelines</a>使用名词来描述，如 <code>ing</code> <code>able</code> <code>ible</code> 例如</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="type">Collection</span></div><div class="line"><span class="type">WidgerFactory</span></div><div class="line"><span class="type">Equtable</span></div><div class="line"><span class="type">Resizing</span></div></pre></td></tr></table></figure>
<h2 id="emumerations-枚举命名规范"><a href="#Emumerations-枚举命名规范" class="headerlink" title="Emumerations 枚举命名规范"></a>Emumerations 枚举命名规范</h2><p>使用首字母小写的驼峰命名法给每个case命名</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">enum</span> <span class="title">Shape</span> </span>&#123;</div><div class="line">  <span class="keyword">case</span> rectangle</div><div class="line">  <span class="keyword">case</span> square</div><div class="line">  <span class="keyword">case</span> rightTriangle</div><div class="line">  <span class="keyword">case</span> equilateralTriangle</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="class-prefixes类型前缀"><a href="#Class-Prefixes类型前缀" class="headerlink" title="Class Prefixes类型前缀"></a>Class Prefixes类型前缀</h2><p><del>官方建议不使用前缀，因为swift有命名空间的概念</del> 但是由于在项目开发中不可避免使用开源库，大部分使用pods管理，但是有时候需要针对需要定制功能，直接修改源码，这时候是直接将源码放在工程中，而且大部分的项目都是混编项目。可能导致命名冲突，此处还建议用LJ(Lianjia)当作命名前缀</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">LJHomeViewController</span>: <span class="title">UIViewController</span> </span>&#123;&#125;</div></pre></td></tr></table></figure>
<h2 id="selector选择器"><a href="#Selector选择器" class="headerlink" title="Selector选择器"></a>Selector选择器</h2><p>建议使用可推测的上下文环境，来创建选择器，而不是点击Xcode的Fix it ，这样会产生一个全名称 选择器</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> sel = #selector(viewDidLoad)</div></pre></td></tr></table></figure>
<p>不推荐</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> sel = #selector(<span class="type">ViewController</span>.viewDidLoad)</div></pre></td></tr></table></figure>
<h2 id="generics泛型"><a href="#Generics泛型" class="headerlink" title="Generics泛型"></a>Generics泛型</h2><p>泛型命名应该使用大写的驼峰命名法，，如果给一个泛型起名字其实没意义，可以使用常见的T，U，V来命名 推荐</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Stack</span>&lt;<span class="title">Element</span>&gt; </span>&#123; ... &#125;</div><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">writeTo</span>&lt;Target: OutputStream&gt;<span class="params">(<span class="keyword">inout</span> target: Target)</span></span></div><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">max</span>&lt;T: Comparable&gt;<span class="params">(x: T, <span class="number">_</span> y: T)</span></span> -&gt; <span class="type">T</span></div></pre></td></tr></table></figure>
<p>不推荐</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Stack</span>&lt;<span class="title">T</span>&gt; </span>&#123; ... &#125;<span class="comment">//命名无意义</span></div><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">writeTo</span>&lt;target: OutputStream&gt;<span class="params">(<span class="keyword">inout</span> t: target)</span></span><span class="comment">// 首字母未大写</span></div><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">max</span>&lt;Thing: Comparable&gt;<span class="params">(x: Thing, <span class="number">_</span> y: Thing)</span></span> -&gt; <span class="type">Thing</span><span class="comment">//简称即可</span></div></pre></td></tr></table></figure>
<h1 id="code-formatting-代码格式"><a href="#Code-Formatting-代码格式" class="headerlink" title="Code Formatting 代码格式"></a>Code Formatting 代码格式</h1><h2 id="留空白"><a href="#留空白" class="headerlink" title="留空白"></a>留空白</h2><ul>
<li>建议使用tabs 而不是使用空格</li>
<li>文件结束时留一行空白</li>
<li>用足够的空行把代码分割为合理的逻辑块，而不是非常紧凑</li>
<li><p>不要在一行代码结尾处留空格</p>
<ul>
<li>更不要在空行（\n）中使用缩进（\t）</li>
</ul>
</li>
</ul>
<h2 id="声明类型时将冒号与标识符连在一起"><a href="#声明类型时，将冒号与标识符连在一起" class="headerlink" title="声明类型时，将冒号与标识符连在一起"></a>声明类型时，将冒号与标识符连在一起</h2><p>当声明一个变量时冒号紧跟变量，空一格再写类型</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">SmallBatchSustainableFairtrade</span>: <span class="title">Coffee</span> </span>&#123; ... &#125;</div><div class="line"></div><div class="line"><span class="keyword">let</span> timeToCoffee: <span class="type">NSTimeInterval</span> = <span class="number">2</span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">makeCoffee</span><span class="params">(type: CoffeeType)</span></span> -&gt; <span class="type">Coffee</span> &#123; ... &#125;</div></pre></td></tr></table></figure>
<h2 id="control-flow-控制流"><a href="#Control-Flow-控制流" class="headerlink" title="Control Flow 控制流"></a>Control Flow 控制流</h2><p>建议使用Swift范的for in 循环而不是 while or c 式for循环</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">for</span> <span class="number">_</span> <span class="keyword">in</span> <span class="number">0</span>..&lt;<span class="number">3</span> &#123;</div><div class="line">  <span class="built_in">print</span>(<span class="string">"Hello three times"</span>)</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">for</span> (index, person) <span class="keyword">in</span> attendeeList.<span class="built_in">enumerate</span>() &#123;</div><div class="line">  <span class="built_in">print</span>(<span class="string">"<span class="subst">\(person)</span> is at position #<span class="subst">\(index)</span>"</span>)</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">for</span> index <span class="keyword">in</span> <span class="number">0</span>.<span class="built_in">stride</span>(to: items.<span class="built_in">count</span>, by: <span class="number">2</span>) &#123;</div><div class="line">  <span class="built_in">print</span>(index)</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">for</span> index <span class="keyword">in</span> (<span class="number">0</span>...<span class="number">3</span>).<span class="built_in">reverse</span>() &#123;   <span class="comment">//3，2，1，0</span></div><div class="line">  <span class="built_in">print</span>(index)</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="代码块缩进"><a href="#代码块缩进" class="headerlink" title="代码块缩进"></a>代码块缩进</h2><p>(if/else/switch/while etc.)或者method function 的大括号留在当前行，并前保留一个空格 ，能省略的不要添加 如</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">if</span> user.isHappy &#123;</div><div class="line">  <span class="comment">// Do something</span></div><div class="line">&#125; <span class="keyword">else</span> &#123;</div><div class="line">  <span class="comment">// Do something else</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>不推荐</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">if</span> (user.isHappy )          多余空格</div><div class="line">&#123;                  换行位置不对</div><div class="line">  <span class="comment">// Do something</span></div><div class="line">&#125;</div><div class="line"><span class="keyword">else</span> &#123;</div><div class="line">  <span class="comment">// Do something else</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="early-return"><a href="#Early-Return" class="headerlink" title="Early Return"></a>Early Return</h2><p>当你遇到某些操作需要条件判断去执行，应该使用<code>防御式编程</code> 尽早返回 如</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">guard</span> n.isNumber <span class="keyword">else</span> &#123;</div><div class="line">    <span class="keyword">return</span></div><div class="line">&#125;</div><div class="line"><span class="keyword">guard</span> <span class="keyword">let</span> number1 = number1, number2 = number2, number3 = number3 <span class="keyword">else</span> &#123; <span class="built_in">fatalError</span>(<span class="string">"impossible"</span>) &#125;</div><div class="line"><span class="comment">// do something with numbers</span></div><div class="line"><span class="comment">// Use n here</span></div><div class="line"><span class="comment">//guard 理解为确保的意思，  如 确保n是一个数字</span></div></pre></td></tr></table></figure>
<p>不推荐使用if判断</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">if</span> n.isNumber &#123;</div><div class="line">    <span class="comment">// Use n here</span></div><div class="line">&#125; <span class="keyword">else</span> &#123;</div><div class="line">    <span class="keyword">return</span></div><div class="line">&#125;</div><div class="line"></div><div class="line"></div><div class="line"><span class="keyword">if</span> <span class="keyword">let</span> number1 = number1 &#123;</div><div class="line">  <span class="keyword">if</span> <span class="keyword">let</span> number2 = number2 &#123;</div><div class="line">    <span class="keyword">if</span> <span class="keyword">let</span> number3 = number3 &#123;</div><div class="line">      <span class="comment">// do something with numbers</span></div><div class="line">    &#125;</div><div class="line">    <span class="keyword">else</span> &#123;</div><div class="line">      <span class="built_in">fatalError</span>(<span class="string">"impossible"</span>)</div><div class="line">    &#125;</div><div class="line">  &#125;</div><div class="line">  <span class="keyword">else</span> &#123;</div><div class="line">    <span class="built_in">fatalError</span>(<span class="string">"impossible"</span>)</div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line"><span class="keyword">else</span> &#123;</div><div class="line">  <span class="built_in">fatalError</span>(<span class="string">"impossible"</span>)</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="semicolons-分号"><a href="#Semicolons-分号" class="headerlink" title="Semicolons 分号"></a>Semicolons 分号</h2><p>不要写分号，不要写分号，不要写分号 Swift不同于JavaScript ,详情参看 <a href="http://stackoverflow.com/questions/444080/do-you-recommend-using-semicolons-after-every-statement-in-javascript" target="_blank" rel="external">generally considered unsafe—Do you recommend using semicolons after every statement in JavaScript?</a></p>
<p>更不建议把多句代码块放在一行中</p>
<h2 id="自定义运算符的时候左右尽量各保留一个空格"><a href="#自定义运算符的时候左右尽量各保留一个空格" class="headerlink" title="自定义运算符的时候左右尽量各保留一个空格"></a>自定义运算符的时候左右尽量各保留一个空格</h2><p>如</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">func</span> &lt;|(lhs: Int, rhs: Int) -&gt; <span class="title">Int</span></span></div><div class="line"><span class="title">func</span> &lt;|&lt;&lt;A&gt;<span class="params">(lhs: A, rhs: A)</span> -&gt; <span class="type">A</span></div><div class="line"><span class="comment">// 重构后</span></div><div class="line"><span class="function"><span class="keyword">func</span> &lt;| (lhs: Int, rhs: Int) -&gt; <span class="title">Int</span></span></div><div class="line"><span class="title">func</span> &lt;|&lt; &lt;A&gt;<span class="params">(lhs: A, rhs: A)</span> -&gt; <span class="type">A</span></div></pre></td></tr></table></figure>
<h1 id="代码分割"><a href="#代码分割" class="headerlink" title="代码分割"></a>代码分割</h1><p>使用良好的代码分割让你的代码块更具有逻辑性</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// MARK: -                   类似@parma mark -</span></div><div class="line"><span class="comment">// MARK:                      类似@parma mark</span></div></pre></td></tr></table></figure>
<h2 id="protocolconformance-协议保持一致性"><a href="#ProtocolConformance-协议保持一致性" class="headerlink" title="ProtocolConformance 协议保持一致性"></a>ProtocolConformance 协议保持一致性</h2><p>一个类型实现一个协议时建议单独声明一个扩展，保证逻辑性分离 如</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyViewcontroller</span>: <span class="title">UIViewController</span> </span>&#123;</div><div class="line">  <span class="comment">// class stuff here</span></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// MARK: - UITableViewDataSource</span></div><div class="line"><span class="class"><span class="keyword">extension</span> <span class="title">MyViewcontroller</span>: <span class="title">UITableViewDataSource</span> </span>&#123;</div><div class="line">  <span class="comment">// table view data source methods</span></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// MARK: - UIScrollViewDelegate</span></div><div class="line"><span class="class"><span class="keyword">extension</span> <span class="title">MyViewcontroller</span>: <span class="title">UIScrollViewDelegate</span> </span>&#123;</div><div class="line">  <span class="comment">// scroll view delegate methods</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>不推荐实现的所有协议写在一起</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyViewcontroller</span>: <span class="title">UIViewController</span>, <span class="title">UITableViewDataSource</span>, <span class="title">UIScrollViewDelegate</span> </span>&#123;</div><div class="line">  <span class="comment">// all methods</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="无用的代码要删除"><a href="#无用的代码要删除" class="headerlink" title="无用的代码要删除"></a>无用的代码要删除</h2><p>无用的代码和注释要删除 ，避免给阅读代码的人造成困惑和疑问</p>
<h1 id="类型定义"><a href="#类型定义" class="headerlink" title="类型定义"></a>类型定义</h1><p>尽可能的使用swift自带类型，在必须的时候才做桥接 ，String-&gt; NSString , Set-&gt;NSSet</p>
<h2 id="更多的使用let而不是var"><a href="#更多的使用let，而不是var" class="headerlink" title="更多的使用let，而不是var"></a>更多的使用let，而不是var</h2><p>尽量<code>let foo = something</code> 而非 <code>var for = somthing</code></p>
<blockquote>
<p>let-有保障 并且它的值的永远不会改变，对同事也是个 清晰的标记，对于它的用法，之后的代码可以做个强而有力的推断。更容易明白代码的含义。否则的话一旦你用了 var，还要去考虑值会不会改变，这时候你就不得不人肉去检查。 <code>这样，无论何时你看到 var，就假设它会变，并找到原因。</code></p>
</blockquote>
<h2 id="常量"><a href="#常量" class="headerlink" title="常量"></a>常量</h2><p>不建议直接命名顶级变量，建议定义在结构体或者枚举内部，用static let 声明。 可以给这些变量一个合适的命名空间</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">enum</span> <span class="title">Math</span> </span>&#123;</div><div class="line">  <span class="keyword">static</span> <span class="keyword">let</span> e  = <span class="number">2.718281828459045235360287</span></div><div class="line">  <span class="keyword">static</span> <span class="keyword">let</span> pi = <span class="number">3.141592653589793238462643</span></div><div class="line">&#125;</div><div class="line"></div><div class="line">radius * <span class="type">Math</span>.pi * <span class="number">2</span> <span class="comment">// circumference</span></div></pre></td></tr></table></figure>
<h2 id="optional可选类型"><a href="#Optional可选类型" class="headerlink" title="Optional可选类型"></a>Optional可选类型</h2><h3 id="尽量不要使用强制解包"><a href="#尽量不要使用强制解包" class="headerlink" title="尽量不要使用强制解包"></a>尽量不要使用强制解包</h3><p>对于一个可选类型<code>var foo = Type?</code> 不要使用强制解包</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">foo!.doSomethind()</div></pre></td></tr></table></figure>
<p>使用<code>可选绑定</code>，或者 <code>可选链操作</code></p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">if</span> <span class="keyword">let</span> foo = foo &#123;</div><div class="line">    <span class="comment">// Use unwrapped `foo` value in here</span></div><div class="line">&#125; <span class="keyword">else</span> &#123;</div><div class="line">    <span class="comment">// If appropriate, handle the case where the optional is nil</span></div><div class="line">&#125;</div><div class="line"><span class="comment">//或者</span></div><div class="line"><span class="comment">// Call the function if `foo` is not nil. If `foo` is nil, ignore we ever tried to make the call</span></div><div class="line">foo?.callSomethingIfFooIsNotNil()</div></pre></td></tr></table></figure>
<h3 id="避免使用隐式可选类型"><a href="#避免使用隐式可选类型" class="headerlink" title="避免使用隐式可选类型"></a>避免使用隐式可选类型</h3><p>如果 foo 可能为 nil ，尽可能的用 let foo: FooType? 代替 let foo: FooType!（注意：一般情况下，?可以代替!）</p>
<h2 id="struct-initializers-结构体初始化"><a href="#Struct-Initializers-结构体初始化" class="headerlink" title="Struct Initializers 结构体初始化"></a>Struct Initializers 结构体初始化</h2><p>使用结构体初始化而不是CGGet。。。之类的创建方法</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> bounds = <span class="type">CGRect</span>(x: <span class="number">40</span>, y: <span class="number">20</span>, width: <span class="number">120</span>, height: <span class="number">80</span>)</div><div class="line"><span class="keyword">let</span> centerPoint = <span class="type">CGPoint</span>(x: <span class="number">96</span>, y: <span class="number">42</span>)</div></pre></td></tr></table></figure>
<h2 id="lazy-initialization"><a href="#Lazy-Initialization" class="headerlink" title="Lazy Initialization"></a>Lazy Initialization</h2><p>对于较大开销的初始化或者配置较多的初始化建议放在加载属性里</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">lazy</span> <span class="keyword">var</span> locationManager: <span class="type">CLLocationManager</span> = <span class="keyword">self</span>.makeLocationManager()</div><div class="line"></div><div class="line"><span class="keyword">private</span> <span class="function"><span class="keyword">func</span> <span class="title">makeLocationManager</span><span class="params">()</span></span> -&gt; <span class="type">CLLocationManager</span> &#123;</div><div class="line">  <span class="keyword">let</span> manager = <span class="type">CLLocationManager</span>()</div><div class="line">  manager.desiredAccuracy = kCLLocationAccuracyBest</div><div class="line">  manager.delegate = <span class="keyword">self</span></div><div class="line">  manager.requestAlwaysAuthorization()</div><div class="line">  <span class="keyword">return</span> manager</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h1 id="classes-and-structures-结构体和类"><a href="#Classes-and-Structures-结构体和类" class="headerlink" title="Classes and Structures 结构体和类"></a>Classes and Structures 结构体和类</h1><h2 id="首选struct而非class"><a href="#首选struct而非class" class="headerlink" title="首选struct而非class"></a>首选struct而非class</h2><p>在非必需（比如没有生命周期）的时候使用struct，因为多态可以使用protocl实现 继承可以使用组合实现 值类型容易辨别，更可以用let去推测不可变的行为</p>
<h2 id="只有在必须时才使用self"><a href="#只有在必须时才使用self" class="headerlink" title="只有在必须时才使用self"></a>只有在必须时才使用self</h2><p>忘掉Objective-C到底时使用self.pro 还是_ivar的访问方式，对于swift内部调用properties或者method省略掉self</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">private</span> <span class="class"><span class="keyword">class</span> <span class="title">History</span> </span>&#123;</div><div class="line">    <span class="keyword">var</span> events: [<span class="type">Event</span>]</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">func</span> <span class="title">rewrite</span><span class="params">()</span></span> &#123;</div><div class="line">        events = []</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>只有在使用闭包或者命名冲突时再加上self</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">extension</span> <span class="title">History</span> </span>&#123;</div><div class="line">    <span class="keyword">init</span>(events: [<span class="type">Event</span>]) &#123;</div><div class="line">        <span class="keyword">self</span>.events = events</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="keyword">var</span> whenVictorious: () -&gt; () &#123;</div><div class="line">        <span class="keyword">return</span> &#123;</div><div class="line">            <span class="keyword">self</span>.rewrite()</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<blockquote>
<p>只有在使用闭包时self 增强了被捕获的语义，其它时候是冗余的</p>
</blockquote>
<h2 id="对于只读的属性或者下标语法使用隐式的getter方法"><a href="#对于只读的属性或者下标语法，使用隐式的getter方法" class="headerlink" title="对于只读的属性或者下标语法，使用隐式的getter方法"></a>对于只读的属性或者下标语法，使用隐式的getter方法</h2><p>建议</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> myGreatProperty: <span class="type">Int</span> &#123;</div><div class="line">    <span class="keyword">return</span> <span class="number">4</span></div><div class="line">&#125;</div><div class="line"><span class="keyword">subscript</span>(index: <span class="type">Int</span>) -&gt; <span class="type">T</span> &#123;</div><div class="line">    <span class="keyword">return</span> objects[index]</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>不建议完整的写法，比较繁琐</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> myGreatProperty: <span class="type">Int</span> &#123;</div><div class="line">    <span class="keyword">get</span> &#123;</div><div class="line">        <span class="keyword">return</span> <span class="number">4</span></div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"><span class="keyword">subscript</span>(index: <span class="type">Int</span>) -&gt; <span class="type">T</span> &#123;</div><div class="line">    <span class="keyword">get</span> &#123;</div><div class="line">        <span class="keyword">return</span> objects[index]</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="请把class默认标记为final"><a href="#请把class默认标记为final" class="headerlink" title="请把class默认标记为final"></a>请把class默认标记为final</h2><p>组合通常比继承更合适，而且不用 继承意味着考虑的更加健壮</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// Turn any generic type into a reference type using this Box class.</span></div><div class="line"><span class="keyword">final</span> <span class="class"><span class="keyword">class</span> <span class="title">Box</span>&lt;<span class="title">T</span>&gt; </span>&#123;</div><div class="line">  <span class="keyword">let</span> value: <span class="type">T</span></div><div class="line">  <span class="keyword">init</span>(<span class="number">_</span> value: <span class="type">T</span>) &#123;</div><div class="line">    <span class="keyword">self</span>.value = value</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="类型推断"><a href="#类型推断" class="headerlink" title="类型推断"></a>类型推断</h2><p>能让系统推断的类型不要显示指明 如</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Composite</span>&lt;<span class="title">T</span>&gt; </span>&#123;</div><div class="line">    <span class="function"><span class="keyword">func</span> <span class="title">compose</span><span class="params">(other: Composite&lt;T&gt;)</span></span> -&gt; <span class="type">Composite</span>&lt;<span class="type">T</span>&gt; &#123;</div><div class="line">        <span class="keyword">return</span> <span class="type">Composite</span>&lt;<span class="type">T</span>&gt;(<span class="keyword">self</span>, other)</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"> <span class="keyword">let</span> num:<span class="type">Int</span> = <span class="number">4</span></div></pre></td></tr></table></figure>
<p>重构为</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Composite</span>&lt;<span class="title">T</span>&gt; </span>&#123;</div><div class="line">    <span class="function"><span class="keyword">func</span> <span class="title">compose</span><span class="params">(other: Composite)</span></span> -&gt; <span class="type">Composite</span> &#123;</div><div class="line">        <span class="keyword">return</span> <span class="type">Composite</span>(<span class="keyword">self</span>, other)</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"><span class="keyword">let</span> num = <span class="number">4</span></div></pre></td></tr></table></figure>
<p>空的字典和空数组的类型 使用<code>类型标记</code> 加强语义</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> names: [<span class="type">String</span>] = []</div><div class="line"><span class="keyword">var</span> lookup: [<span class="type">String</span>: <span class="type">Int</span>] = [:]</div></pre></td></tr></table></figure>
<h2 id="函数声明"><a href="#函数声明" class="headerlink" title="函数声明"></a>函数声明</h2><p>函数名要简短清晰，如果能保持在一行内，大括号也要保持在一行，如果不能换行并用Tab<code>\b</code>缩进</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">reticulateSplines</span><span class="params">(spline: [Double])</span></span> -&gt; <span class="type">Bool</span> &#123;</div><div class="line">  <span class="comment">// reticulate code goes here</span></div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">reticulateSplines</span><span class="params">(spline: [Double], adjustmentFactor: Double,</span></span></div><div class="line">    translateConstant: Int, comment: String) -&gt; <span class="type">Bool</span> &#123;</div><div class="line">  <span class="comment">// reticulate code goes here</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="闭包表达式"><a href="#闭包表达式" class="headerlink" title="闭包表达式"></a>闭包表达式</h2><p>使用尾随闭包提高可读性，</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="type">UIView</span>.animateWithDuration(<span class="number">1.0</span>) &#123;</div><div class="line">  <span class="keyword">self</span>.myView.alpha = <span class="number">0</span></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="type">UIView</span>.animateWithDuration(<span class="number">1.0</span>,</div><div class="line">  animations: &#123;</div><div class="line">    <span class="keyword">self</span>.myView.alpha = <span class="number">0</span></div><div class="line">  &#125;,</div><div class="line">  completion: &#123; finished <span class="keyword">in</span></div><div class="line">    <span class="keyword">self</span>.myView.removeFromSuperview()</div><div class="line">  &#125;</div><div class="line">)</div></pre></td></tr></table></figure>
<p>常见的闭包语义可以使用其缩略形式</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> value = numbers.<span class="built_in">map</span> &#123; $<span class="number">0</span> * <span class="number">2</span> &#125;.<span class="built_in">filter</span> &#123; $<span class="number">0</span> % <span class="number">3</span> == <span class="number">0</span> &#125;.indexOf(<span class="number">90</span>)</div><div class="line"></div><div class="line"><span class="keyword">let</span> value = numbers</div><div class="line">   .<span class="built_in">map</span> &#123;$<span class="number">0</span> * <span class="number">2</span>&#125;</div><div class="line">   .<span class="built_in">filter</span> &#123;$<span class="number">0</span> &gt; <span class="number">50</span>&#125;</div><div class="line">   .<span class="built_in">map</span> &#123;$<span class="number">0</span> + <span class="number">10</span>&#125;</div></pre></td></tr></table></figure>
<h1 id="syntactic-sugar语法糖"><a href="#Syntactic-Sugar语法糖" class="headerlink" title="Syntactic Sugar语法糖"></a>Syntactic Sugar语法糖</h1><p>对于有语法糖的建议使用，提升可读性 如</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> deviceModels: [<span class="type">String</span>]</div><div class="line"><span class="keyword">var</span> employees: [<span class="type">Int</span>: <span class="type">String</span>]</div><div class="line"><span class="keyword">var</span> faxNumber: <span class="type">Int</span>?</div></pre></td></tr></table></figure>
<p>而不是</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> deviceModels: <span class="type">Array</span>&lt;<span class="type">String</span>&gt;</div><div class="line"><span class="keyword">var</span> employees: <span class="type">Dictionary</span>&lt;<span class="type">Int</span>, <span class="type">String</span>&gt;</div><div class="line"><span class="keyword">var</span> faxNumber: <span class="type">Optional</span>&lt;<span class="type">Int</span>&gt;</div></pre></td></tr></table></figure>
<h1 id="内存管理"><a href="#内存管理" class="headerlink" title="内存管理"></a>内存管理</h1><p>对于class类型需要注意内存管理 普通的闭包建议使用[weak self] 或者[unowned self] 对于异步的闭包建议使用 <code>[weak self]</code> and <code>guard let strongSelf = self else { return }</code>搭配使用<br><br>weak 避免出现循环引用， strongself 避免在异步回调中 捕获列表中捕获的变量被析构</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">resource.request().onComplete &#123; [<span class="keyword">weak</span> <span class="keyword">self</span>] response <span class="keyword">in</span></div><div class="line">  <span class="keyword">guard</span> <span class="keyword">let</span> strongSelf = <span class="keyword">self</span> <span class="keyword">else</span> &#123; <span class="keyword">return</span> &#125;</div><div class="line">  <span class="keyword">let</span> model = strongSelf.updateModel(response)</div><div class="line">  strongSelf.updateUI(model)</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<hr>
<h1 id="对于顶级类型函数变量定义明确的列出权限控制"><a href="#对于顶级类型，函数，变量定义，明确的列出权限控制" class="headerlink" title="对于顶级类型，函数，变量定义，明确的列出权限控制"></a>对于顶级类型，函数，变量定义，明确的列出权限控制</h1><p>对于全局变量 顶级函数，类型，永远应该有着详尽的权限控制说明符</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="keyword">var</span> whoopsGlobalState: <span class="type">Int</span></div><div class="line"><span class="keyword">internal</span> <span class="class"><span class="keyword">struct</span> <span class="title">TheFez</span> </span>&#123;&#125;</div><div class="line"><span class="keyword">private</span> <span class="function"><span class="keyword">func</span> <span class="title">doTheThings</span><span class="params">(things: [Thing])</span></span> &#123;&#125;</div></pre></td></tr></table></figure>
<blockquote>
<p>参考自</p>
<ol>
<li><a href="https://github.com/github/swift-style-guide" target="_blank" rel="external">Github</a></li>
<li><a href="https://github.com/linkedin/swift-style-guide" target="_blank" rel="external">LinkedIn</a></li>
<li><a href="https://github.com/prolificinteractive/swift-style-guide" target="_blank" rel="external">Prolificinterative</a></li>
<li><a href="https://github.com/raywenderlich/swift-style-guide" target="_blank" rel="external">Raywenderlich</a></li>
</ol>
</blockquote>

            <div class="clearfix"></div>
            <hr class="nogutter">
        </div>
        <nav class="pagination" role="pagination">
    
    
    <a class="pull-right" href="/2015/09/22/SwiftValueType/">
        寒哥带你深入了解下Swift中的Value Type →
    </a>
    
</nav>

        <div class="duoshuo">
<div class="ds-thread" data-thread-key="2016/07/14/Swift-Code-Style/" data-title="Swift-Code-Style" data-url="http://valiantcat.com/2016/07/14/Swift-Code-Style/"></div>
<script type="text/javascript">
var duoshuoQuery = {short_name:"chachaHouse"};
(function() {
	var ds = document.createElement('script');
	ds.type = 'text/javascript';ds.async = true;
	ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
	ds.charset = 'UTF-8';
	(document.getElementsByTagName('head')[0] 
	 || document.getElementsByTagName('body')[0]).appendChild(ds);
})();
</script>
</div>
    </div>
</section>


      
<!-- ============================ Footer =========================== -->

<footer>
    <div class="container">
            <div class="copy">
                <p>
                    &copy; 2014<script>new Date().getFullYear()>2010&&document.write("-"+new Date().getFullYear());</script>, Content By 寒哥. All Rights Reserved.
                </p>
                <p>Theme By <a href="//go.kieran.top" style="color: #767D84">Kieran</a></p>
            </div>
            <div class="social">
                <ul>
                    
                    <li><a href="https://github.com/aiqiuqiu" title="Github" target="_blank"><i class="icon-github"></i></a>&nbsp;</li>
                    
                    
                    <li><a href="https://twitter.com/" title="Twitter" target="_blank"><i class="icon-twitter"></i></a>&nbsp;</li>
                    
                    
                    <li><a href="https://www.facebook.com/" title="Facebook" target="_blank"><i class="icon-facebook"></i></a>&nbsp;</li>
                    
                    
                    <li><a href="https://google.com/" title="Google-Plus" target="_blank"><i class="icon-google-plus"></i></a>&nbsp;</li>
                    
                    
                    <li><a href="http://weibo.com/" title="Sina-Weibo" target="_blank"><i class="icon-sina-weibo"></i></a>&nbsp;</li>
                    
                </ul>
            </div>
            <div class="clearfix"> </div>
        </div>
</footer>

<!-- ============================ END Footer =========================== -->
      <!-- Load our scripts -->
        
<!-- Resizable 'on-demand' full-height hero -->
<script type="text/javascript">
    
    var resizeHero = function () {
        var hero = $(".cover,.heightblock"),
            window1 = $(window);
        hero.css({
            "height": window1.height()
        });
    };
    
    resizeHero();
    
    $(window).resize(function () {
        resizeHero();
    });
</script>
<script src="/js/plugins.min.js"></script><!-- Bootstrap core and concatenated plugins always load here -->
<script src="/js/jquery.flexslider-min.js"></script><!-- Flexslider plugin -->
<script src="/js/scripts.js"></script><!-- Theme scripts -->

<!-- Initiate flexslider plugin -->
<script type="text/javascript">
    $(document).ready(function($) {
      $('.flexslider').flexslider({
        animation: "fade",
        prevText: "",
        nextText: "",
        directionNav: true
      });
    });
</script>

</body>
</html>
